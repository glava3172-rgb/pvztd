<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>PvZ Tower Defense — Fan Site</title>
<style>
:root{
  --bg:#0f1112;
  --panel:#202428;
  --accent:#38d169;
  --accent-2:#8b5cf6;
  --muted:#9aa3a8;
  --glass: rgba(255,255,255,0.04);
  --card-radius:14px;
}
*{box-sizing:border-box}
body{
  margin:0;
  font-family: Inter, Roboto, Arial, sans-serif;
  background: linear-gradient(180deg, rgba(20,22,23,0.95) 0%, rgba(9,10,11,1) 100%);
  color:#eef2f3;
  -webkit-font-smoothing:antialiased;
  -moz-osx-font-smoothing:grayscale;
  min-height:100vh;
  overflow-x:hidden;
}
header{display:flex;align-items:center;justify-content:space-between;gap:12px;padding:18px 22px;background:linear-gradient(90deg, rgba(0,0,0,0.15), rgba(255,255,255,0.02));backdrop-filter: blur(6px);border-bottom: 1px solid rgba(255,255,255,0.03);}
.brand{display:flex;align-items:center;gap:12px;}
.logo{width:48px;height:48px;border-radius:10px;background:linear-gradient(135deg,var(--accent),var(--accent-2));display:flex;align-items:center;justify-content:center;font-weight:800;color:#061013;box-shadow:0 6px 18px rgba(14,20,16,0.45);}
.brand h1{font-size:18px;margin:0}
nav{display:flex;gap:10px;align-items:center}
nav a{color:var(--muted);text-decoration:none;padding:8px 12px;border-radius:10px;font-size:14px;}
nav a:hover{background:var(--glass); color:#fff}
.language-select {
  padding:6px 8px;border-radius:8px;border:1px solid rgba(255,255,255,0.06);background:transparent;color:var(--muted);font-weight:700;
}
.container{max-width:1080px;margin:26px auto;padding:0 18px;}
.hero{display:flex;gap:18px;align-items:center;background:linear-gradient(180deg, rgba(32,36,40,0.6), rgba(28,30,32,0.6));padding:18px;border-radius:16px;box-shadow:0 6px 30px rgba(0,0,0,0.6);}
.hero-left{flex:1}
.hero-right{width:260px;display:flex;flex-direction:column;gap:12px;align-items:center}
.play-btn{background:linear-gradient(90deg,var(--accent),#79f2b6);border:none;padding:12px 18px;border-radius:12px;font-weight:700;font-size:16px;color:#031010;cursor:pointer;box-shadow:0 8px 24px rgba(56,209,105,0.12), inset 0 -2px 6px rgba(0,0,0,0.12);}
.play-btn:active{transform:scale(.99)}
.desc{color:var(--muted);line-height:1.4;margin-top:8px;font-size:14px}
.grid{display:grid;grid-template-columns:repeat(4,1fr);gap:14px;margin-top:20px;}
.card{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));border-radius:var(--card-radius);padding:12px;border:1px solid rgba(255,255,255,0.03);display:flex;gap:12px;align-items:center;position:relative;overflow:hidden;transition:transform .25s ease, box-shadow .25s ease;}
.card:hover{ transform:translateY(-6px); box-shadow:0 18px 40px rgba(0,0,0,0.6); }
.tower-meta{flex:1}
.tower-meta h3{margin:0;font-size:16px}
.tower-meta p{margin:6px 0 0;font-size:13px;color:var(--muted)}
.stats-box{margin-top:6px;font-size:12px;color:var(--muted);line-height:1.4}
.tower-img-wrapper{width:80px;height:80px;border-radius:10px;border:2px solid rgba(255,255,255,0.04);overflow:hidden;display:flex;align-items:center;justify-content:center;background:linear-gradient(180deg, rgba(0,0,0,0.12), rgba(255,255,255,0.01));transition: box-shadow .25s ease, transform .25s ease;}
.tower-img-wrapper img{ width:100%; height:100%; object-fit:cover; display:block; }
.card:hover .tower-img-wrapper{ box-shadow: 0 8px 30px rgba(56,209,105,0.18); transform:scale(1.03); border-color: rgba(56,209,105,0.7); }
.sun-effect{position:absolute;right:10px;top:10px;width:10px;height:10px;border-radius:50%;background: radial-gradient(circle, #fff8b3 0%, #ffd34d 35%, #ffb400 100%);box-shadow:0 0 8px rgba(255,206,90,0.8);animation: pulse 1.6s infinite ease-in-out;}
@keyframes pulse{0%{transform:scale(.9)}50%{transform:scale(1.12)}100%{transform:scale(.9)}}
@media (max-width:900px){.grid{grid-template-columns:repeat(2,1fr)}.hero-right{width:200px}}
@media (max-width:520px){header{padding:12px}.grid{grid-template-columns:1fr}.hero{flex-direction:column}.hero-right{width:100%;align-items:stretch}nav{display:none}.container{padding:10px}}
.particles{position:fixed;left:0;top:0;right:0;bottom:0;pointer-events:none;overflow:hidden;z-index:0}
.leaf{position:absolute;width:14px;height:14px;background:linear-gradient(135deg,#6cd37a,#2fb86b);transform:rotate(20deg);opacity:.9;border-radius:3px;animation:fall infinite linear;}
@keyframes fall{0%{transform:translateY(-10vh) rotate(0deg);opacity:0}10%{opacity:1}100%{transform:translateY(110vh) rotate(360deg); opacity:0}}
</style>
</head>
<body>

<header>
  <div class="brand">
    <div class="logo">PvZ</div>
    <div>
      <h1 id="siteTitle">PvZ Tower Defense</h1>
      <div id="siteSubtitle" style="font-size:12px;color:var(--muted)">Fan project • Roblox mode</div>
    </div>
  </div>

  <nav>
    <a href="#about" id="navAbout">About</a>
    <a href="#towers" id="navTowers">Towers</a>
    <a href="#zombies" id="navZombies">Zombies</a>
    <a href="#updates" id="navUpdates">Updates</a>

    <!-- language selector inside menu (variant chosen) -->
    <select id="languageSelect" class="language-select" aria-label="Language selector">
      <option value="en">EN</option>
      <option value="ru">RU</option>
    </select>
  </nav>
</header>

<main class="container" role="main">
  <section class="hero">
    <div class="hero-left">
      <h2 id="heroTitle" style="margin:0 0 6px 0">PvZ Tower Defense — official fan mode site</h2>
      <div id="heroDesc" class="desc">Shows towers, zombies and brief descriptions. Press Play to open the Roblox mode.</div>
      <div style="margin-top:12px">
        <button class="play-btn" id="playGame" onclick="openRoblox()">Play PvZ TD</button>
      </div>
    </div>
    <div class="hero-right">
      <div style="background:linear-gradient(135deg, rgba(56,209,105,0.08), rgba(139,92,246,0.06)); padding:12px; border-radius:12px; text-align:center;">
        <div id="currentWaveLabel" style="font-size:12px;color:var(--muted)">Current wave</div>
        <div id="wave" style="font-size:28px;font-weight:800">1</div>
      </div>
      <div id="playersLabel" style="font-size:13px;color:var(--muted); text-align:center; margin-top:6px">Players online: <strong id="players">—</strong></div>
    </div>
  </section>

  <section class="section" id="towersSection">
    <h2 id="towersHeading" style="margin:0 0 8px 0">Towers</h2>
    <div class="grid" id="towersGrid">

      <!-- Each tower has ids: titleX, descX, statsX for translation -->
      <!-- 1 Cactus -->
      <div class="card">
        <div class="tower-meta">
          <h3 id="title_cactus">Cactus</h3>
          <p id="desc_cactus">Defensive tower — shoots spikes, slows enemies.</p>
          <div id="stats_cactus" class="stats-box">
            <strong class="stat-label">Damage:</strong> 50 → 150<br>
            <strong class="stat-label">Range:</strong> 8 → 14<br>
            <strong class="stat-label">Cooldown:</strong> 1.5 → 0.7<br>
            <strong class="stat-label">DPS:</strong> 33 → 214
          </div>
        </div>
        <div class="tower-img-wrapper"><img src="https://i.imgur.com/bwGWSXc.png" alt="Cactus"></div>
      </div>

      <!-- 2 Watermelon -->
      <div class="card">
        <div class="tower-meta">
          <h3 id="title_watermelon">Watermelon</h3>
          <p id="desc_watermelon">Heavy splash damage.</p>
          <div id="stats_watermelon" class="stats-box">
            <strong class="stat-label">Damage:</strong> 80 → 200<br>
            <strong class="stat-label">Range:</strong> 6 → 12<br>
            <strong class="stat-label">Cooldown:</strong> 2 → 1<br>
            <strong class="stat-label">DPS:</strong> 40 → 200
          </div>
        </div>
        <div class="tower-img-wrapper"><img src="https://via.placeholder.com/80?text=Water" alt="Watermelon"></div>
      </div>

      <!-- 3 Cocotank -->
      <div class="card">
        <div class="tower-meta">
          <h3 id="title_cocotank">Cocotank</h3>
          <p id="desc_cocotank">High single-target damage.</p>
          <div id="stats_cocotank" class="stats-box">
            <strong class="stat-label">Damage:</strong> 120 → 300<br>
            <strong class="stat-label">Range:</strong> 7 → 14<br>
            <strong class="stat-label">Cooldown:</strong> 2 → 1.2<br>
            <strong class="stat-label">DPS:</strong> 60 → 250
          </div>
        </div>
        <div class="tower-img-wrapper"><img src="https://via.placeholder.com/80?text=Coco" alt="Cocotank"></div>
      </div>

      <!-- 4 Lemon Pult -->
      <div class="card">
        <div class="tower-meta">
          <h3 id="title_lemon">Lemon Pult</h3>
          <p id="desc_lemon">Long-range lemon projectiles.</p>
          <div id="stats_lemon" class="stats-box">
            <strong class="stat-label">Damage:</strong> 60 → 180<br>
            <strong class="stat-label">Range:</strong> 10 → 18<br>
            <strong class="stat-label">Cooldown:</strong> 1.2 → 0.6<br>
            <strong class="stat-label">DPS:</strong> 50 → 300
          </div>
        </div>
        <div class="tower-img-wrapper"><img src="https://via.placeholder.com/80?text=Lemon" alt="Lemon Pult"></div>
      </div>

      <!-- 5 Sunflower -->
      <div class="card">
        <div class="tower-meta">
          <h3 id="title_sunflower">Sunflower</h3>
          <p id="desc_sunflower">Generates sun for building.</p>
          <div id="stats_sunflower" class="stats-box">
            <strong class="stat-label">Sun:</strong> 25 → 50 / 3s
          </div>
        </div>
        <div class="tower-img-wrapper"><img src="https://via.placeholder.com/80?text=Sun" alt="Sunflower"></div>
        <div class="sun-effect" aria-hidden="true"></div>
      </div>

      <!-- 6 Strawberry -->
      <div class="card">
        <div class="tower-meta">
          <h3 id="title_strawberry">Strawberry</h3>
          <p id="desc_strawberry">Fast attacker with quick cooldown.</p>
          <div id="stats_strawberry" class="stats-box">
            <strong class="stat-label">Damage:</strong> 30 → 90<br>
            <strong class="stat-label">Range:</strong> 6 → 12<br>
            <strong class="stat-label">Cooldown:</strong> 0.8 → 0.4<br>
            <strong class="stat-label">DPS:</strong> 37 → 225
          </div>
        </div>
        <div class="tower-img-wrapper"><img src="https://via.placeholder.com/80?text=Straw" alt="Strawberry"></div>
      </div>

      <!-- 7 Carnivorous Plant -->
      <div class="card">
        <div class="tower-meta">
          <h3 id="title_carn">Carnivorous Plant</h3>
          <p id="desc_carn">Melee chomper — devours nearby enemies.</p>
          <div id="stats_carn" class="stats-box">
            <strong class="stat-label">Damage:</strong> 100 → 250<br>
            <strong class="stat-label">Range:</strong> 1 → 1<br>
            <strong class="stat-label">Cooldown:</strong> 1.8 → 0.9<br>
            <strong class="stat-label">DPS:</strong> 55 → 280
          </div>
        </div>
        <div class="tower-img-wrapper"><img src="https://via.placeholder.com/80?text=Carn" alt="Carnivorous Plant"></div>
      </div>

      <!-- 8 Mr Carrot -->
      <div class="card">
        <div class="tower-meta">
          <h3 id="title_carrot">Mr Carrot</h3>
          <p id="desc_carrot">Long-range precision shots.</p>
          <div id="stats_carrot" class="stats-box">
            <strong class="stat-label">Damage:</strong> 70 → 200<br>
            <strong class="stat-label">Range:</strong> 12 → 20<br>
            <strong class="stat-label">Cooldown:</strong> 1.5 → 0.8<br>
            <strong class="stat-label">DPS:</strong> 46 → 250
          </div>
        </div>
        <div class="tower-img-wrapper"><img src="https://via.placeholder.com/80?text=Carrot" alt="Mr Carrot"></div>
      </div>

      <!-- 9 Witch Hazel -->
      <div class="card">
        <div class="tower-meta">
          <h3 id="title_witch">Witch Hazel</h3>
          <p id="desc_witch">Casts slowing spells to hinder enemies.</p>
          <div id="stats_witch" class="stats-box">
            <strong class="stat-label">Damage:</strong> 40 → 100<br>
            <strong class="stat-label">Range:</strong> 8 → 14<br>
            <strong class="stat-label">Cooldown:</strong> 1.5 → 0.7<br>
            <strong class="stat-label">DPS:</strong> 27 → 143
          </div>
        </div>
        <div class="tower-img-wrapper"><img src="https://via.placeholder.com/80?text=Witch" alt="Witch Hazel"></div>
      </div>

      <!-- 10 Jack -->
      <div class="card">
        <div class="tower-meta">
          <h3 id="title_jack">Jack</h3>
          <p id="desc_jack">Explosive pumpkin attacks in an area.</p>
          <div id="stats_jack" class="stats-box">
            <strong class="stat-label">Damage:</strong> 90 → 220<br>
            <strong class="stat-label">Range:</strong> 7 → 13<br>
            <strong class="stat-label">Cooldown:</strong> 2 → 1<br>
            <strong class="stat-label">DPS:</strong> 45 → 220
          </div>
        </div>
        <div class="tower-img-wrapper"><img src="https://via.placeholder.com/80?text=Jack" alt="Jack"></div>
      </div>

      <!-- 11 Citron -->
      <div class="card">
        <div class="tower-meta">
          <h3 id="title_citron">Citron</h3>
          <p id="desc_citron">High-rate ranged DPS machine.</p>
          <div id="stats_citron" class="stats-box">
            <strong class="stat-label">Damage:</strong> 100 → 300<br>
            <strong class="stat-label">Range:</strong> 10 → 18<br>
            <strong class="stat-label">Cooldown:</strong> 1.2 → 0.6<br>
            <strong class="stat-label">DPS:</strong> 83 → 500
          </div>
        </div>
        <div class="tower-img-wrapper"><img src="https://via.placeholder.com/80?text=Citron" alt="Citron"></div>
      </div>

      <!-- 12 Fire Peashooter -->
      <div class="card">
        <div class="tower-meta">
          <h3 id="title_fire">Fire Peashooter</h3>
          <p id="desc_fire">Shoots flaming peas that burn enemies.</p>
          <div id="stats_fire" class="stats-box">
            <strong class="stat-label">Damage:</strong> 50 → 150<br>
            <strong class="stat-label">Range:</strong> 8 → 14<br>
            <strong class="stat-label">Cooldown:</strong> 1.5 → 0.7<br>
            <strong class="stat-label">DPS:</strong> 33 → 214
          </div>
        </div>
        <div class="tower-img-wrapper"><img src="https://via.placeholder.com/80?text=Fire" alt="Fire Peashooter"></div>
      </div>

    </div>
  </section>

  <section class="section" id="updatesSection">
    <h2 id="updatesHeading" style="margin:0 0 8px 0">Updates</h2>
    <p id="updatesText" style="color:var(--muted)">All towers show full stats. Play button fixed. Particle effects and mobile tweaks applied.</p>
  </section>

</main>

<div class="particles" id="particles"></div>

<script>
/* -----------------------
  Interaction, particles, localization
------------------------*/

function openRoblox() {
  // open in new tab - triggered by direct click
  window.open(
    'https://www.roblox.com/games/96532094607147/3-Hours-Plants-VS-Zombie-Tower-Defense',
    '_blank'
  );
}

/* Demo wave & players */
let wave = 1;
setInterval(()=> {
  wave++;
  document.getElementById('wave').textContent = wave;
}, 10000);

setInterval(()=> {
  const p = Math.floor(20 + Math.random()*180);
  const playersEl = document.getElementById('players');
  if(playersEl) playersEl.textContent = p;
}, 3000);

/* breathing animation */
const cards = document.querySelectorAll('.card');
setInterval(()=> {
  cards.forEach(c => c.style.transform = `translateY(${Math.random()*2}px)`);
}, 1200);

document.querySelectorAll('.card').forEach(card=>{
  card.addEventListener('mouseenter', ()=> {
    const imgWrap = card.querySelector('.tower-img-wrapper');
    if(imgWrap) imgWrap.style.transform = 'scale(1.05)';
  });
  card.addEventListener('mouseleave', ()=> {
    const imgWrap = card.querySelector('.tower-img-wrapper');
    if(imgWrap) imgWrap.style.transform = '';
  });
});

/* particles */
const particlesRoot = document.getElementById('particles');
function spawnLeaf(){
  const leaf = document.createElement('div');
  leaf.className = 'leaf';
  leaf.style.left = Math.random()*100 + 'vw';
  leaf.style.top = -20 + 'px';
  leaf.style.opacity = (0.5 + Math.random()*0.6);
  const size = 8 + Math.random()*18;
  leaf.style.width = size + 'px';
  leaf.style.height = (size*0.6) + 'px';
  leaf.style.borderRadius = '3px';
  leaf.style.transform = `rotate(${Math.random()*360}deg)`;
  leaf.style.animationDuration = (6 + Math.random()*6) + 's';
  particlesRoot.appendChild(leaf);
  setTimeout(()=> leaf.remove(), 14000);
}
setInterval(spawnLeaf, 800);

/* -------------------------
   Localization (EN / RU)
   Add new keys here to expand translations.
   Keys map to element IDs in DOM.
-------------------------*/
const i18n = {
  en: {
    langCode: 'en',
    siteTitle: 'PvZ Tower Defense',
    siteSubtitle: 'Fan project • Roblox mode',
    nav: { about: 'About', towers: 'Towers', zombies: 'Zombies', updates: 'Updates' },
    heroTitle: 'PvZ Tower Defense — official fan mode site',
    heroDesc: 'Shows towers, zombies and brief descriptions. Press Play to open the Roblox mode.',
    playBtn: 'Play PvZ TD',
    currentWave: 'Current wave',
    playersOnline: 'Players online:',
    towersHeading: 'Towers',
    updatesHeading: 'Updates',
    updatesText: 'All towers show full stats. Play button fixed. Particle effects and mobile tweaks applied.',
    // towers: [ id_title, id_desc ]
    towers: {
      cactus: { t: 'Cactus', d: 'Defensive tower — shoots spikes, slows enemies.', statsPrefix: { damage: 'Damage:', range: 'Range:', cooldown: 'Cooldown:', dps: 'DPS:' } },
      watermelon: { t: 'Watermelon', d: 'Heavy splash damage.', statsPrefix: {} },
      cocotank: { t: 'Cocotank', d: 'High single-target damage.', statsPrefix: {} },
      lemon: { t: 'Lemon Pult', d: 'Long-range lemon projectiles.', statsPrefix: {} },
      sunflower: { t: 'Sunflower', d: 'Generates sun for building.', statsPrefix: { sun: 'Sun:' } },
      strawberry: { t: 'Strawberry', d: 'Fast attacker with quick cooldown.', statsPrefix: {} },
      carn: { t: 'Carnivorous Plant', d: 'Melee chomper — devours nearby enemies.', statsPrefix: {} },
      carrot: { t: 'Mr Carrot', d: 'Long-range precision shots.', statsPrefix: {} },
      witch: { t: 'Witch Hazel', d: 'Casts slowing spells to hinder enemies.', statsPrefix: {} },
      jack: { t: 'Jack', d: 'Explosive pumpkin attacks in an area.', statsPrefix: {} },
      citron: { t: 'Citron', d: 'High-rate ranged DPS machine.', statsPrefix: {} },
      fire: { t: 'Fire Peashooter', d: 'Shoots flaming peas that burn enemies.', statsPrefix: {} }
    }
  },

  ru: {
    langCode: 'ru',
    siteTitle: 'PvZ Tower Defense',
    siteSubtitle: 'Фан-проект • Режим Roblox',
    nav: { about: 'О проекте', towers: 'Башни', zombies: 'Зомби', updates: 'Обновления' },
    heroTitle: 'PvZ Tower Defense — официальный фан-сайт режима',
    heroDesc: 'Показаны башни, зомби и краткие описания. Нажмите Play, чтобы открыть режим в Roblox.',
    playBtn: 'Играть PvZ TD',
    currentWave: 'Текущая волна',
    playersOnline: 'Игроков онлайн:',
    towersHeading: 'Башни',
    updatesHeading: 'Обновления',
    updatesText: 'Все башни теперь показывают полные характеристики. Кнопка Play работает. Частицы и мобильные правки применены.',
    towers: {
      cactus: { t: 'Кактус', d: 'Защитная башня — стреляет шипами, замедляет врагов.', statsPrefix: { damage: 'Урон:', range: 'Дальность:', cooldown: 'Перезарядка:', dps: 'Урон/сек:' } },
      watermelon: { t: 'Арбуз', d: 'Мощный урон по площади.', statsPrefix: { damage: 'Урон:', range: 'Дальность:', cooldown: 'Перезарядка:', dps: 'Урон/сек:' } },
      cocotank: { t: 'Кокотанк', d: 'Высокий урон по одной цели.', statsPrefix: { damage: 'Урон:', range: 'Дальность:', cooldown: 'Перезарядка:', dps: 'Урон/сек:' } },
      lemon: { t: 'Лимонная Пульта', d: 'Дальнобойные лимонные снаряды.', statsPrefix: { damage: 'Урон:', range: 'Дальность:', cooldown: 'Перезарядка:', dps: 'Урон/сек:' } },
      sunflower: { t: 'Подсолнух', d: 'Генерирует солнце для строительства.', statsPrefix: { sun: 'Солнце:' } },
      strawberry: { t: 'Клубника', d: 'Быстрый атакующий с малой перезарядкой.', statsPrefix: { damage: 'Урон:', range: 'Дальность:', cooldown: 'Перезарядка:', dps: 'Урон/сек:' } },
      carn: { t: 'Хищное растение', d: 'Ближний боец — пожирает ближайших врагов.', statsPrefix: { damage: 'Урон:', range: 'Дальность:', cooldown: 'Перезарядка:', dps: 'Урон/сек:' } },
      carrot: { t: 'Мистер Морковка', d: 'Дальнобойные прицельные выстрелы.', statsPrefix: { damage: 'Урон:', range: 'Дальность:', cooldown: 'Перезарядка:', dps: 'Урон/сек:' } },
      witch: { t: 'Ведьма Хейзел', d: 'Накладывает заклинания замедления на врагов.', statsPrefix: { damage: 'Урон:', range: 'Дальность:', cooldown: 'Перезарядка:', dps: 'Урон/сек:' } },
      jack: { t: 'Джек', d: 'Взрывные тыквенные атаки по области.', statsPrefix: { damage: 'Урон:', range: 'Дальность:', cooldown: 'Перезарядка:', dps: 'Урон/сек:' } },
      citron: { t: 'Цитрон', d: 'Высокая скорострельность и урон на дистанции.', statsPrefix: { damage: 'Урон:', range: 'Дальность:', cooldown: 'Перезарядка:', dps: 'Урон/сек:' } },
      fire: { t: 'Огненный горохострел', d: 'Стреляет горящими горохами, наносит ожог.', statsPrefix: { damage: 'Урон:', range: 'Дальность:', cooldown: 'Перезарядка:', dps: 'Урон/сек:' } }
    }
  }
};

/* helper: set text by id if element exists */
function setText(id, text) {
  const el = document.getElementById(id);
  if(el) el.textContent = text;
}

/* apply localization to page */
function applyLang(lang) {
  const dict = i18n[lang] || i18n.en;

  // page-level
  setText('siteTitle', dict.siteTitle);
  setText('siteSubtitle', dict.siteSubtitle);
  setText('navAbout', dict.nav.about);
  setText('navTowers', dict.nav.towers);
  setText('navZombies', dict.nav.zombies);
  setText('navUpdates', dict.nav.updates);
  setText('heroTitle', dict.heroTitle);
  setText('heroDesc', dict.heroDesc);
  setText('playGame', dict.playBtn);
  setText('currentWaveLabel', dict.currentWave);
  // playersLabel contains text + value, so update innerHTML preserving <strong>
  const playersLabel = document.getElementById('playersLabel');
  if(playersLabel) playersLabel.innerHTML = `${dict.playersOnline} <strong id="players">—</strong>`;
  setText('towersHeading', dict.towersHeading);
  setText('updatesHeading', dict.updatesHeading);
  setText('updatesText', dict.updatesText);

  // towers: titles/descriptions and stat labels
  const towerKeys = Object.keys(dict.towers);
  towerKeys.forEach(key => {
    const tId = 'title_' + key;
    const dId = 'desc_' + key;
    const sId = 'stats_' + key;
    const tower = dict.towers[key];
    if(tower) {
      if(document.getElementById(tId)) setText(tId, tower.t);
      if(document.getElementById(dId)) setText(dId, tower.d);

      // Build stats block: we will reuse numeric values from current DOM but translate labels
      const statsEl = document.getElementById(sId);
      if(statsEl) {
        // parse existing numbers/text inside statsEl (simple approach: remove any label words and keep numbers arrows)
        // We'll keep the same numbers as in HTML, but replace labels with translated ones.
        // Extract numeric lines from innerText
        const raw = statsEl.innerText.split('\n').map(l => l.trim()).filter(Boolean);
        // Map prefixes order: common order is Damage, Range, Cooldown, DPS or Sun for sunflower
        const prefixes = tower.statsPrefix || {};
        if(prefixes.sun) {
          // sunflower specific
          // find the line that contains numbers or '/'
          const valueLine = raw.find(r => /[0-9]/.test(r)) || raw[0] || '';
          statsEl.innerHTML = `<strong class="stat-label">${prefixes.sun}</strong> ${valueLine}`;
        } else {
          // general stats: assume up to 4 lines
          const damageLine = raw[0] || '';
          const rangeLine = raw[1] || '';
          const cooldownLine = raw[2] || '';
          const dpsLine = raw[3] || '';
          const dmgLabel = prefixes.damage || 'Damage:';
          const rangeLabel = prefixes.range || 'Range:';
          const cdLabel = prefixes.cooldown || 'Cooldown:';
          const dpsLabel = prefixes.dps || 'DPS:';
          // keep only numbers part after colon/space in original lines
          const getValue = (line) => {
            const parts = line.split(':');
            if(parts.length > 1) return parts.slice(1).join(':').trim();
            // nothing to split — return whole line
            return line;
          };
          const dmgVal = getValue(damageLine);
          const rangeVal = getValue(rangeLine);
          const cdVal = getValue(cooldownLine);
          const dpsVal = getValue(dpsLine);
          // build innerHTML
          statsEl.innerHTML = `<strong class="stat-label">${dmgLabel}</strong> ${dmgVal}<br>
<strong class="stat-label">${rangeLabel}</strong> ${rangeVal}<br>
<strong class="stat-label">${cdLabel}</strong> ${cdVal}<br>
<strong class="stat-label">${dpsLabel}</strong> ${dpsVal}`;
        }
      }
    }
  });

  // update document lang attribute
  document.documentElement.lang = dict.langCode || lang;
}

/* init language selector */
const langSelect = document.getElementById('languageSelect');
langSelect.value = 'en';
applyLang('en'); // default English

langSelect.addEventListener('change', (e) => {
  applyLang(e.target.value);
});

/* Accessibility: allow keyboard activation for Play button */
document.getElementById('playGame').addEventListener('keydown', (e)=>{
  if(e.key === 'Enter' || e.key === ' ') {
    e.preventDefault();
    openRoblox();
  }
});

console.log('Localized PvZ TD site loaded.');
</script>
</body>
</html>
